# Clase 2: Entornos Virtuales en Python e IntroducciÃ³n a FastAPI y APIs REST ğŸ

Â¡Bienvenidos a este tutorial definitivo sobre **entornos virtuales en Python**! ğŸ‰ Los entornos virtuales son una herramienta esencial para cualquier desarrollador de Python, ya que permiten aislar dependencias, gestionar proyectos y evitar conflictos entre paquetes. En este tutorial, aprenderÃ¡s desde los conceptos bÃ¡sicos hasta tÃ©cnicas avanzadas, con ejemplos prÃ¡cticos, diagramas visuales y consejos Ãºtiles, todo presentado en un formato claro y atractivo. Â¡Empecemos! ğŸš€

---

## Objetivo del Tutorial ğŸ¯

âœ… **Dominar los entornos virtuales en Python**  
Al finalizar, podrÃ¡s:

- Comprender quÃ© son los entornos virtuales y por quÃ© son importantes.
- Crear, activar, usar y eliminar entornos virtuales con `venv` y otras herramientas.
- Gestionar dependencias y exportar requisitos.
- Resolver problemas comunes y aplicar mejores prÃ¡cticas.

---

## Contenido del Tutorial ğŸ“š

### 1. Â¿QuÃ© es un Entorno Virtual? ğŸŒ

Un **entorno virtual** en Python es un espacio aislado que contiene una copia del intÃ©rprete de Python y sus bibliotecas, permitiendo instalar paquetes especÃ­ficos para un proyecto sin afectar otros proyectos o el sistema global. Imagina que cada entorno virtual es una "caja" independiente con su propio conjunto de herramientas.

#### Â¿Por quÃ© usar entornos virtuales? ğŸ¤”

- **Aislamiento**: Evita conflictos entre versiones de paquetes (ej. `numpy 1.18` vs. `numpy 1.24`).
- **OrganizaciÃ³n**: Mantiene las dependencias de cada proyecto separadas.
- **Portabilidad**: Facilita compartir proyectos con archivos de requisitos.
- **Seguridad**: Protege el sistema global de instalaciones no deseadas.

#### Flujo de trabajo con entornos virtuales

Este diagrama muestra cÃ³mo funcionan los entornos virtuales:

```mermaid
graph TD
    A[Sistema Global <br> Python 3.10] -->|Sin entorno virtual| B[Proyecto A <br> numpy 1.18, pandas 1.3]
    A -->|Sin entorno virtual| C[Proyecto B <br> numpy 1.24, pandas 2.0]
    B --> D{Conflicto de versiones}
    C --> D
    E[Entorno Virtual A <br> Python 3.10, numpy 1.18, pandas 1.3] -->|Aislamiento| F[Proyecto A]
    G[Entorno Virtual B <br> Python 3.10, numpy 1.24, pandas 2.0] -->|Aislamiento| H[Proyecto B]
```

!!! info "Dato curioso"
    Los entornos virtuales fueron introducidos en Python 3.3 con el mÃ³dulo `venv`, aunque herramientas como `virtualenv` existÃ­an antes.

---

### 2. Herramientas para Entornos Virtuales ğŸ› ï¸

Python ofrece varias herramientas para crear entornos virtuales. AquÃ­ exploramos las mÃ¡s comunes:

#### a) `venv` (Recomendado)

- Incluido en Python 3.3+.
- Ligero, estÃ¡ndar y sin dependencias externas.
- Ideal para la mayorÃ­a de los proyectos.

#### b) `virtualenv`

- Herramienta de terceros mÃ¡s antigua.
- Compatible con Python 2 y versiones antiguas de Python 3.
- Ofrece caracterÃ­sticas adicionales (ej. soporte para mÃºltiples intÃ©rpretes).

#### c) Otros (Breve menciÃ³n)

- `Conda`: Popular en ciencia de datos, gestiona entornos y paquetes no-Python.
- `Poetry`/`Pipenv`: Combinan gestiÃ³n de entornos y dependencias.

!!! tip "Consejo"
    Usa `venv` para simplicidad y compatibilidad, a menos que necesites funciones especÃ­ficas de otras herramientas.

---

### 3. ConfiguraciÃ³n Inicial: InstalaciÃ³n de Python ğŸ“¦

Antes de crear entornos virtuales, asegÃºrate de tener Python instalado.

#### Pasos

1. **Descarga Python**:
   - Visita [python.org](https://www.python.org/downloads/) y descarga Python 3.7+.
   - En Windows, marca "Agregar Python al PATH" durante la instalaciÃ³n.

2. **Verifica la instalaciÃ³n**:

```bash
python --version
```

**Salida esperada**:
```
Python 3.10.5
```

3. **Instala `pip`** (si no estÃ¡ incluido):

```bash
python -m ensurepip --upgrade
python -m pip install --upgrade pip
```

#### Diagrama de instalaciÃ³n

```mermaid
flowchart TD
    A[Inicio] --> B{Â¿Python instalado?}
    B -- No --> C[Descargar Python <br> python.org]
    B -- SÃ­ --> D{Â¿pip instalado?}
    C --> E[Instalar Python <br> Agregar al PATH]
    E --> D
    D -- No --> F[Instalar pip <br> ensurepip]
    D -- SÃ­ --> G[Listo para crear <br> entornos virtuales]
    F --> G
```

---

### 4. Crear y Gestionar Entornos Virtuales con `venv` âš™ï¸

El mÃ³dulo `venv` es la forma estÃ¡ndar de crear entornos virtuales en Python. A continuaciÃ³n, te guiamos paso a paso.

#### Paso 1: Crear un entorno virtual

1. Navega al directorio de tu proyecto:

```bash
cd mi_proyecto
```

2. Crea un entorno virtual (llamado `venv` por convenciÃ³n):

```bash
python -m venv .venv
```

Esto crea una carpeta `.venv/` con:
- Un intÃ©rprete de Python aislado.
- Una copia de `pip`.
- Directorios para paquetes (`site-packages`).

#### Paso 2: Activar el entorno virtual

Activa el entorno para que los comandos `python` y `pip` usen la versiÃ³n aislada:

- **Windows**:

```bash
.venv\Scripts\activate
```

- **Linux/macOS**:

```bash
source .venv/bin/activate
```

**Salida esperada** (prompt cambia):
```
(venv) user@machine:~/mi_proyecto$
```

#### Paso 3: Instalar paquetes

Con el entorno activado, instala paquetes con `pip`:

```bash
pip install requests
```

Verifica los paquetes instalados:

```bash
pip list
```

**Salida ejemplo**:
```
Package    Version
---------- -------
pip        22.3.1
requests   2.28.1
setuptools 65.5.0
```

#### Paso 4: Desactivar el entorno

Para salir del entorno virtual:

```bash
deactivate
```

El prompt vuelve a la normalidad.

#### Diagrama de gestiÃ³n de entornos virtuales

```mermaid
sequenceDiagram
    actor User
    participant Sistema
    User->>Sistema: python -m venv .venv
    Sistema-->>User: Entorno creado en .venv/
    User->>Sistema: source .venv/bin/activate
    Sistema-->>User: Entorno activado
    User->>Sistema: pip install requests
    Sistema-->>User: Paquete instalado en .venv/
    User->>Sistema: deactivate
    Sistema-->>User: Entorno desactivado
```

!!! success "Â¡Logro desbloqueado!"
    Has creado y activado tu primer entorno virtual. Â¡EstÃ¡s listo para desarrollar proyectos aislados!

---

### 5. GestiÃ³n de Dependencias ğŸ“‹

Para compartir tu proyecto, necesitas documentar las dependencias. AquÃ­ te mostramos cÃ³mo hacerlo.

#### Exportar dependencias

Crea un archivo `requirements.txt` con las dependencias instaladas:

```bash
pip freeze > requirements.txt
```

**Contenido ejemplo**:
```
requests==2.28.1
urllib3==1.26.12
```

#### Instalar dependencias desde `requirements.txt`

En otro sistema o entorno, instala las dependencias:

```bash
pip install -r requirements.txt
```

!!! tip "Buena prÃ¡ctica"
    Incluye `requirements.txt` en tu repositorio Git para facilitar la colaboraciÃ³n.

---

### 6. Uso de Entornos Virtuales en Proyectos Reales ğŸ–¥ï¸

Veamos un ejemplo prÃ¡ctico con un proyecto que usa FastAPI.

#### Estructura del proyecto

```
mi_proyecto/
â”œâ”€â”€ main.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .venv/
```

#### CÃ³digo de ejemplo (`main.py`)

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
    return {"message": "Â¡Hola, mundo!"}
```

#### Pasos

1. Crea el entorno virtual:

```bash
python -m venv .venv
```

2. Activa el entorno:

```bash
source .venv/bin/activate  # Linux/macOS
.venv\Scripts\activate     # Windows
```

3. Instala FastAPI y Uvicorn:

```bash
pip install fastapi uvicorn
```

4. Exporta las dependencias:

```bash
pip freeze > requirements.txt
```

5. Ejecuta la aplicaciÃ³n:

```bash
uvicorn main:app --reload
```

Visita `http://127.0.0.1:8000` para ver la respuesta.

!!! note "PrÃ¡ctica recomendada"
    Crea un entorno virtual por proyecto para mantener las dependencias organizadas.

---


## IntroducciÃ³n a FastAPI y APIs REST ğŸŒŸ

Â¡Bienvenidos al curso de **FastAPI**! En esta primera clase, exploraremos los fundamentos de FastAPI, las APIs REST y cÃ³mo configurar tu entorno de desarrollo para crear APIs modernas y rÃ¡pidas con Python. A travÃ©s de explicaciones, ejemplos prÃ¡cticos y diagramas visuales, estarÃ¡s listo para construir tu primera API. Â¡Empecemos! ğŸš€

---

## Objetivo de la Clase ğŸ¯

âœ… **Comprender FastAPI y configurar el entorno de desarrollo**  
Al finalizar esta clase, entenderÃ¡s quÃ© es FastAPI, sus ventajas, los conceptos clave de las APIs REST y tendrÃ¡s un entorno funcional para desarrollar aplicaciones.

---

## Contenido de la Clase ğŸ“š

### 1. Â¿QuÃ© es FastAPI? Ventajas y ComparaciÃ³n con Otros Frameworks ğŸ› ï¸

**FastAPI** es un framework web moderno para construir APIs con Python, diseÃ±ado para ser rÃ¡pido, fÃ¡cil de usar y compatible con estÃ¡ndares como **ASGI** (Asynchronous Server Gateway Interface). Creado por **SebastiÃ¡n RamÃ­rez**, FastAPI combina rendimiento, tipado y documentaciÃ³n automÃ¡tica, lo que lo hace ideal para proyectos de cualquier escala.

#### Arquitectura de FastAPI

El siguiente diagrama muestra cÃ³mo FastAPI procesa solicitudes:

```mermaid
graph TD
    A["Cliente\n(Navegador, App)"] -->|Solicitud HTTP| B["Uvicorn\n(Servidor ASGI)"]
    B --> C["FastAPI\n(Framework)"]
    C --> D["Starlette\n(Routing, Middlewares)"]
    C --> E["Pydantic\n(ValidaciÃ³n de datos)"]
    D --> F["Endpoints\n(LÃ³gica de negocio)"]
    E --> F
    F -->|Respuesta JSON| B
    B -->|Respuesta HTTP| A
```



#### Â¿Por quÃ© elegir FastAPI? ğŸŒˆ

- **Rendimiento**: Comparable con Node.js y Go, gracias a **Starlette** y **Uvicorn**.
- **Tipado y validaciÃ³n**: Usa **Pydantic** para validar datos automÃ¡ticamente.
- **DocumentaciÃ³n automÃ¡tica**: Genera interfaces con **Swagger UI** y **ReDoc**.
- **AsincronÃ­a**: Soporta `async/await` para aplicaciones de alto rendimiento.
- **Simplicidad**: Sintaxis clara y moderna.

#### ComparaciÃ³n con otros frameworks ğŸ“Š

| Framework   | Velocidad | Tipado | DocumentaciÃ³n AutomÃ¡tica | AsincronÃ­a | Curva de Aprendizaje |
|-------------|-----------|--------|--------------------------|------------|----------------------|
| **FastAPI** | â­â­â­â­â­ | SÃ­     | SÃ­ (Swagger, ReDoc)      | SÃ­         | Media                |
| **Flask**   | â­â­â­      | No     | No                       | No         | Baja                 |
| **Django**  | â­â­â­      | Parcial| No                       | Parcial    | Alta                 |

!!! info "Dato curioso"
    FastAPI se inspira en Flask, pero aÃ±ade soporte asÃ­ncrono y validaciÃ³n automÃ¡tica, revolucionando el desarrollo de APIs en Python.

---

### 2. Conceptos de APIs REST: MÃ©todos HTTP, Endpoints y JSON ğŸŒ

Una **API REST** (Representational State Transfer) es un estilo arquitectÃ³nico para diseÃ±ar aplicaciones web que permite la comunicaciÃ³n entre sistemas mediante HTTP. Es la base de muchas aplicaciones modernas, conectando frontends (como React) con backends.

#### Componentes clave de una API REST ğŸ“

- **Endpoints**: URLs que representan recursos (ej. `/users`, `/projects/1`).
- **MÃ©todos HTTP**:
  - `GET`: Obtener datos.
  - `POST`: Crear recursos.
  - `PUT`/`PATCH`: Actualizar recursos.
  - `DELETE`: Eliminar recursos.
- **JSON**: Formato para enviar y recibir datos.
- **CÃ³digos de estado HTTP**: Ej. `200 OK`, `404 Not Found`.

#### Flujo de una solicitud REST

Este diagrama ilustra el proceso de una solicitud REST:

```mermaid
sequenceDiagram
    participant Cliente
    participant Servidor
    Cliente->>Servidor: GET /projects
    Servidor->>Cliente: 200 OK <br> { "projects": [...] }
    Cliente->>Servidor: POST /projects <br> { "name": "Proyecto A" }
    Servidor->>Cliente: 201 Created <br> { "id": 1, "name": "Proyecto A" }
```

#### Ejemplo de solicitud REST ğŸ–¥ï¸

```http
GET /api/projects HTTP/1.1
Host: example.com
Accept: application/json
```

**Respuesta**:

```json
{
  "projects": [
    {"id": 1, "name": "Proyecto A", "status": "active"},
    {"id": 2, "name": "Proyecto B", "status": "completed"}
  ]
}
```

!!! tip "Consejo prÃ¡ctico"
    Aprende los cÃ³digos de estado HTTP mÃ¡s comunes (200, 201, 400, 404, 500) para depurar tus APIs eficazmente.

---

### 3. InstalaciÃ³n de FastAPI, Uvicorn y Python âš™ï¸

Para desarrollar con FastAPI, necesitas un entorno configurado. A continuaciÃ³n, te guiamos paso a paso.

#### Proceso de configuraciÃ³n

Este diagrama muestra los pasos para configurar el entorno:

```mermaid
flowchart TD
    A[Inicio] --> B{Â¿Python instalado?}
    B -- No --> C[Instalar Python 3.7+]
    B -- SÃ­ --> D[Crear entorno virtual]
    C --> D
    D --> E[Activar entorno virtual]
    E --> F[Instalar FastAPI y Uvicorn]
    F --> G[Crear archivo main.py]
    G --> H[Ejecutar API con Uvicorn]
    H --> I[Probar API en navegador]
```

#### Paso 1: Instalar Python ğŸ“¦

1. Descarga Python 3.7+ desde [python.org](https://www.python.org/downloads/).
2. Verifica la instalaciÃ³n:

```bash
python --version
```

#### Paso 2: Crear un entorno virtual ğŸŒ

```bash
python -m venv .venv
```

Activa el entorno:

- **Windows**: `.venv\Scripts\activate`
- **Linux/macOS**: `source .venv/bin/activate`

#### Paso 3: Instalar FastAPI y Uvicorn ğŸ“²

```bash
pip install fastapi uvicorn
```

#### Paso 4: Crear tu primera API ğŸ‰

Crea un archivo `main.py`:

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/projects")
def get_projects():
    return {"projects": [{"id": 1, "name": "Proyecto A", "status": "active"}]}
```

Ejecuta la API:

```bash
uvicorn main:app --reload
```

Visita `http://127.0.0.1:8000/projects` para ver la respuesta JSON o `http://127.0.0.1:8000/docs` para la documentaciÃ³n.

!!! success "Â¡Primer logro!"
    Has creado tu primera API con FastAPI. Â¡El cielo es el lÃ­mite!

---

## PrÃ¡ctica de la Clase ğŸ–¥ï¸

ğŸ¯ **Tarea prÃ¡ctica**:  
Crea una API con un endpoint `/projects` que devuelva una lista de tres proyectos en JSON, cada uno con `id`, `name` y `status`.

**CÃ³digo de ejemplo**:

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/projects")
def get_projects():
    return {
        "projects": [
            {"id": 1, "name": "Proyecto A", "status": "active"},
            {"id": 2, "name": "Proyecto B", "status": "completed"},
            {"id": 3, "name": "Proyecto C", "status": "pending"}
        ]
    }
```

**Instrucciones**:
1. Guarda el cÃ³digo en `main.py`.
2. Ejecuta con `uvicorn main:app --reload`.
3. Verifica en `http://127.0.0.1:8000/projects`.
4. Explora la documentaciÃ³n en `http://127.0.0.1:8000/docs`.

---


# Actividad: Consumir la API REST desde Postman, Thunder Client y una PÃ¡gina Web ğŸŒ

**Objetivo**:  
Aprender a consumir una API REST (como el endpoint `/projects` de la Clase 1) utilizando **Postman**, **Thunder Client** (extensiÃ³n de VS Code), y una pÃ¡gina web bÃ¡sica con **HTML/JavaScript**, documentando el proceso y los resultados.

## Instrucciones ğŸ“

Investiga y prueba cÃ³mo consumir la API REST creada en la Clase 1 (`http://127.0.0.1:8000/projects`) utilizando tres mÃ©todos:

1. **Postman**:

2. **Thunder Client** (extensiÃ³n de VS Code):   

3. **PÃ¡gina web con HTML/JavaScript**:  


## Entregables ğŸ“¦

- Archivo `actividad.md` con la documentaciÃ³n y el pÃ¡rrafo de hallazgos.
- Capturas de pantalla de Postman y Thunder Client.
- Archivo `index.html` con el cÃ³digo JavaScript.
- Repositorio GitHub con todos los archivos.

